<!doctype html>
<html><!-- InstanceBegin template="/Templates/Page.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta charset="utf-8">
<!-- InstanceBeginEditable name="doctitle" -->
<title>DCP Docs: The City Constructor Demo</title>
<!-- InstanceEndEditable -->
<link href="../../css/main.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="container">
  <header> <a href="http://www.databasecontrolpro.appspot.com/1/Contents.html">
    <div class="title_left">Database Control Pro Documentation</div>
    </a>
    <div class="title_right">Version 1.0.0 onwards</div>
  </header>
  <div class="line"></div>
  <nav>
    <div class="border"> Links:
      <ul>
        <li><a href="http://unitysolutionstudios.weebly.com/database-control.html">Website</a></li>
        <li><a href="http://unitysolutionstudios.weebly.com/contact-us.html">Contact Form</a></li>
        <li><a href="https://www.assetstore.unity3d.com/en/#!/content/68574">Asset Store Page</a></li>
        <li><a href="https://forum.unity3d.com/threads/released-database-control-pro.415784/">Unity Forum</a></li>
        <li><a href="https://www.youtube.com/watch?v=M7oDDOigkJI&list=PLb0_DqnplxX8v6l66jOn1Y7vAeAN3Sy1X">Youtube Tutorials</a></li>
        <li><a href="http://www.databasecontrolpro.appspot.com/1/FAQ.html">Frequently Asked Questions</a></li>
      </ul>
    </div>
    <div class="border"> Contents:
      <ul>
        <li><a href="http://www.databasecontrolpro.appspot.com/1/SettingUpDatabaseControlPro.html">Setting Up Database Control Pro</a></li>
        <li><a href="http://www.databasecontrolpro.appspot.com/1/UsingTheDemos.html">Using the Demos</a></li>
        <li><a href="http://www.databasecontrolpro.appspot.com/1/TheDemos.html">The Demos</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/TheDemos/TheLoginDemo.html">The Login Demo</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/TheDemos/TheThirdPersonDemo.html">The Third Person Demo</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/TheDemos/TheCityConstructorDemo.html">The City Constructor Demo</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/TheDemos/TheChatDemo.html">The Chat Demo</a></li>
        <li><a href="http://www.databasecontrolpro.appspot.com/1/IntroductionToTheMainWindows.html">Introduction to the Main Windows</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/IntroductionToTheMainWindows/TheSetupWindow.html">Setup Window</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/IntroductionToTheMainWindows/TheViewerWindow.html">Viewer Window</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/IntroductionToTheMainWindows/TheSequencerWindow.html">Sequencer Window</a></li>
        <li><a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSetupWindow.html">Using The Setup Window</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSetupWindow/SettingUpAProject.html">Setting up a project</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSetupWindow/CreatingADatabase.html">Creating a Database</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSetupWindow/CreatingACommandSequence.html">Creating a Command Sequence</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSetupWindow/PublishingADatabase.html">Publishing a Database</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSetupWindow/UnpublishingADatabase.html">Unpublishing a Database</a></li>
        <li><a href="http://www.databasecontrolpro.appspot.com/1/UsingTheViewerWindow.html">Using The Viewer Window</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheViewerWindow/OpeningADatabase.html">Opening a Database</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheViewerWindow/EditingADatabase.html">Editing a Database</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheViewerWindow/UpdatingADatabase.html">Updating a Database</a></li>
        <li><a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow.html">Using the Sequencer Window</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/OpeningACommandSequence.html">Opening a Command Sequence</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/PlanningACommandSequence.html">Planning a Command Sequence</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/CreatingACommandSequence.html">Creating a Command Sequence</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Variables.html">Variables</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Variables/UsingVariables.html">Using Variables</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Variables/VariableTypes.html">Variable Types</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Variables/VariableTypes/InputVariables.html">Input Variables</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Variables/VariableTypes/OtherVariables.html">Other Variables</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Variables/VariableTypes/BuiltInVariables.html">Built-in Variables</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands.html">Commands</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/GetData.html">Get Data</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/SetData.html">Set Data</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/Return.html">Return</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/If.html">If</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/For.html">For</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/CreateVar.html">Create Var</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/SetVarValue.html">Set Var Value</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/SetVarValueExtra.html">Set Var Value Extra</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/ClearCell.html">Clear Cell</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/ClearRow.html">Clear Row</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/ClearColumn.html">Clear Col</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/DelRow.html">Del Row</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/DelColumn.html">Del Col</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/InsRow.html">Ins Row</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/InsColumn.html">Ins Col</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/FloatOps.html">Float Ops</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/IntOps.html">Int Ops</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/StringOps.html">String Ops</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/Comment.html">Comment</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/Commands/TimeDiff.html">Time Diff</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/HowCommandsHandleErrors.html">How Commands Handle Errors</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/UsingTheSequencerWindow/CommandSequenceEfficiency.html">Command Sequence Efficiency</a></li>
        <li><a href="http://www.databasecontrolpro.appspot.com/1/OtherWindows.html">Other Windows</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/OtherWindows/RunCommandSequenceWindow.html">Run Command Sequence Window</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/OtherWindows/BugWindow.html">Bug Window</a></li>
        <li><a href="http://www.databasecontrolpro.appspot.com/1/RunningACommandSequenceAtRuntime.html">Running a Command Seq at Runtime</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/RunningACommandSequenceAtRuntime/CSharp.html">C#</a></li>
        <li>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.databasecontrolpro.appspot.com/1/RunningACommandSequenceAtRuntime/UnityScript.html">UnityScript</a></li>
        <li><a href="http://www.databasecontrolpro.appspot.com/1/WindowShortcuts.html">Window Shortcuts</a></li>
        <li><a href="http://www.databasecontrolpro.appspot.com/1/FAQ.html">FAQ</a></li>
        <li><a href="http://www.databasecontrolpro.appspot.com/1/UsefulLinks.html">Useful Links</a></li>
      </ul>
    </div>
  </nav>
  <article>
    <!-- InstanceBeginEditable name="LeftRightsOne" -->
    <div class="subLink_left">
    <a href="http://www.databasecontrolpro.appspot.com/1/TheDemos/TheThirdPersonDemo.html">Previous</a></div>
    
    <div class="subLink_right">
    <a href="http://www.databasecontrolpro.appspot.com/1/TheDemos/TheChatDemo.html">Next</a></div>
    <!-- InstanceEndEditable -->
    <br><br><br>
    <!-- InstanceBeginEditable name="PagePath" -->
    <div class="pagePath">
    <a href="http://www.databasecontrolpro.appspot.com/1/Contents.html">Contents</a> &gt; <a href="http://www.databasecontrolpro.appspot.com/1/TheDemos.html">The Demos</a> &gt; The City Constructor Demo
    </div>
    <!-- InstanceEndEditable -->
    <div class="pageTitle"> <!-- InstanceBeginEditable name="Page Name" --> The City Constructor Demo<!-- InstanceEndEditable --></div>
    <!-- InstanceBeginEditable name="Page Text" -->
    <p>The City Constructor Demo is based on a more advanced login/register system which also checks email's and IP Addresses to prevent a single user registering more than one account.<br>
It also says the time since the player last logged in, it has a daily reward, and the player can create buildings, upgrade them, move them and sell them. It is the most secure of all of the demos as everything is checked server-side (on the Command Sequences).<br>
As you would expect, it is the most complex system out of all of the demos. If you want a similar system in your game we would still advise building apon the Login Demo. Using this demo might give you a head start, but it might be more difficult for you to understand which slows down your development speed.<br>
<br>
Make sure you have setup the demo before you try using it.<br>
Once you have setup the demo, you can delete the 'DeleteMe' object from the scene. (It is a child of the canvas)<br>
<br>
The City Constructor Demo can be found at:<br>
Assets&#62;Database Control Pro&#62;Demos&#62;Main Demos&#62;City Constructor Demo&#62;DCP City Constructor Demo<br>
<br>
The City Constructor Demo uses the Smooth UI animation system to translate the UI elements on and off the screen.
<br>
The UI is split up into the Menu UI, the in-game UI and the loading UI in a similar way to the Third Person Demo. All of the code is distributed over multiple scripts and objects, but it should be clear which are the more important ones. As usual, all code is well commented to help explain how the demo works.
<br>
<br>
<br>
<strong>The Structure of the Database:</strong><br><br>
First play the demo, register an account and create a few buildings. Then <a href="../UsingTheSetupWindow.html">Open the Setup Window</a> and <a href="../UsingTheViewerWindow/OpeningADatabase.html">View the Database</a> which you <a href="../UsingTheDemos.html">set the demo up</a> with.<br><br>
The Database should look something like this:<br><br></p>
<mimg><img src="../Images/Viewer/5.png" width="1366" height="376" alt=""/>
</mimg><p>
In this demo, every row is not a single account. Instead every account has a main row followed by rows for each building.<br>
<br>
The Structure of the Player's main row:<br>
The first column stores the player's username.<br>
The second column stores the player's email.<br>
The third column stores the player's IP Address which they registered the account with.<br>
The fourth colmn stores the player's password.<br>
The fifth column stores the player's money.<br>
The sixth column stores the player's level.<br>
Columns 7,8,9,10,11 and 12 store the time since the player last ran a sequence (used to calculate time after player logs in) in the form Year, Month, Day, Hour, Minute and Second (Milliseconds ignored).<br>
Columns 13, 14 and 15 store the time the player last claimed the daily reward (blank if never claimed) in the form Year, Month and Day.<br>
The 16th column stores the number of buildings the player has so the Command Sequence know how many lines to loop through, bellow the player's line in order to go through all of the player's buildings.<br>
<br>
The Structure of one of the Player's building rows:<br>
The first three columns are blank so the 'Register' Command Sequence can easily loop through player usernames, email addresses and IP addresses to make sure a registering player has different values for these.<br>
The fourth column stores the building type. 0 for House, 1 for Factory and 2 for Bank.<br>
The fifth column stores the building's level number.<br>
The sixth column stores the building's position in the scene.<br>
If it is a factory, columns 7, 8, 9, 10, 11, 12 and 13 store the time when the factories money was last collected in the form Year, Month, Day, Hour, Minute, Second and Millisecond.<br>
<br>
<br>
<strong>The Command Sequences:</strong><br><br>
The City Constructor Demo comes with 9 Command Sequences. All of the sequences check everything server-side (except the position of the buildings). These sequences are explained in more detail when you open the sequence and look at the 'Readme' Command.<br><br>
1. Register: This sequence checks the submitted username is not already in use. If it is then an error is returned. If it is not the the IP Address and submitted email address are also compared with the other values in the database. If they are already in the database an error is returned for the game to say 'You already have an account!', otherwise the registration is successful and a new row is added to the database with the player's details.<br><br>
2. Login: This sequence checks the submitted username and password. If they are correct then the player data string is put together and returned. This means working out the time since the last request and the time since the last claimed daily reward (to tell if one can be claimed now or not) and combining it with the players level and money. Then the sequence loops through all of the building rows adding on the building data.<br><br>
3. Build: This sequence is run when the player wants to create a new building. The amount of money is retrieved from the player's main row in the database and if there is enough money, a new row is inserted into the database for the created building.<br><br>
4. Upgrade: This sequence is run when the player wants to upgrade an existing building. The amount of money needed to upgrade is caluclated in the sequence and the player's money is checked to make sure there is enough. Other things are also checked including the player level (to make sure it is high enough). If all of these conditions are satisfied, Success is returned and the level number on the building's row in the database is increased.<br><br>
5. Move: This is the simplest of all the sequences as the position of the buildings is not checked in any sequences as it is less important. Instead the building numer is checked to make sure it is a valid building. If it is then the building position string is replaced and Success is returned.<br><br>
6. Sell: This sequence makes sure the building is valid, adds up all of the upgrade costs of the building to find the total amount ever spent on it. This value is halved to give the sell price. If all conditions are satisfied, the building's row is deleted from the database, and Success is returned while increasig the player's money (and checking it doesn't exceed the maximum amount).<br><br>
7. Collect: This sequence checks the submitted building number corresponds to a factory. It finds the difference in time since the building's money was last collected and works out the amount it must have generated from this while limiting it based on the factory's level. It then updates the time when it was last collected to now and adds the generated money to the players money while checking the player's money does not exceed the maximum amount.<br><br>
8. Level Up: This sequence is run by the game's code after building or upgrading to check for a level up. The sequence iterates through the player buildings, checking for houses. It uses the level of the houses to work out the number of people they contain. This allows it to calculate the total population of the city. It uses the players current level number to work out the population requuired to level up. If the population is high enough it returns Success and adds 1 to the player's level.<br><br>
9. Claim Daily Reward: This sequence works out the time since the Daily Reward was last claimed. If it was a different day, the date in the database is updated, the player money is increased by 100, the player money is limited to its maximum (if required) and 'Success' is retured.<br><br>
</p>
    <!-- InstanceEndEditable -->
    <!-- InstanceBeginEditable name="LeftRightsTwo" -->
     <div class="subLink_left">
    <a href="http://www.databasecontrolpro.appspot.com/1/TheDemos/TheThirdPersonDemo.html">Previous</a></div>
    
    <div class="subLink_right">
    <a href="http://www.databasecontrolpro.appspot.com/1/TheDemos/TheChatDemo.html">Next</a></div>
    <!-- InstanceEndEditable -->
    </article>
  <div class="footer">
    <div class="line"></div>
    Database Control Pro Documentation. By Solution Studios.</div>
</div>
</body>
<!-- InstanceEnd --></html>